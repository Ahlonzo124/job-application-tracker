generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model User {
  id           Int           @id @default(autoincrement())
  username     String        @unique
  password     String
  createdAt    DateTime      @default(now())
  applications Application[]

  // Onboarding & version tracking
  onboardingDismissedAt DateTime?
  lastSeenVersion       String?
}

model Application {
  id                      Int              @id @default(autoincrement())
  createdAt               DateTime         @default(now())
  updatedAt               DateTime         @updatedAt
  userId                  Int?
  company                 String
  title                   String
  location                String?
  url                     String?
  jobType                 String?
  workMode                String?
  seniority               String?
  salaryMin               Float?
  salaryMax               Float?
  salaryCurrency          String?
  salaryPeriod            String?
  descriptionSummary      String?
  keyRequirementsJson     String?
  keyResponsibilitiesJson String?
  stage                   ApplicationStage @default(APPLIED)
  sortOrder               Int              @default(0)
  notes                   String?
  appliedDate             DateTime?
  user                    User?            @relation(fields: [userId], references: [id], onDelete: Cascade)
}

enum ApplicationStage {
  APPLIED
  INTERVIEW
  OFFER
  HIRED
  REJECTED
}
